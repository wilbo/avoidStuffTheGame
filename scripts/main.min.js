"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();/*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  Web Starter Kit
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  Copyright 2015 Google Inc. All rights reserved.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  Licensed under the Apache License, Version 2.0 (the "License")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  you may not use this file except in compliance with the License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  You may obtain a copy of the License at
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *    https://www.apache.org/licenses/LICENSE-2.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  Unless required by applicable law or agreed to in writing, software
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  distributed under the License is distributed on an "AS IS" BASIS,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  See the License for the specific language governing permissions and
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *  limitations under the License
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 */
!function(){function t(t){var e=t.keyCode;(!v._playing&&"13"==e||!v._playing&&"32"==e)&&v.newGame(),"38"==e&&(r=!0),"40"==e&&(u=!0),"37"==e&&(c=!0),"39"==e&&(_=!0)}function e(t){var e=t.keyCode;"38"==e&&(r=!1),"40"==e&&(u=!1),"37"==e&&(c=!1),"39"==e&&(_=!1)}var i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||i)&&navigator.serviceWorker.register("service-worker.js").then(function(t){t.onupdatefound=function(){if(navigator.serviceWorker.controller){var e=t.installing;e.onstatechange=function(){switch(e.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(t){console.error("Error during service worker registration:",t)});var s=function(){function t(e,i,s,n){_classCallCheck(this,t),this._speed=i,this._radius=s,this._color=n,this._context=e}return _createClass(t,[{key:"draw",value:function(){this.shape(this._x,this._y),this.infiniteCanvas()}},{key:"shape",value:function(t,e){this._context.beginPath(),this._context.arc(t,e,this._radius,0,2*Math.PI,!1),this._context.fillStyle=this._color,this._context.fill()}},{key:"infiniteCanvas",value:function(){this.centerOnBoundsTop()&&(this._y=this.getCanvasHeight()),this.centerOnBoundsBottom()&&(this._y=0),this.centerOnBoundsRight()&&(this._x=0),this.centerOnBoundsLeft()&&(this._x=this.getCanvasWidth()),this.touchesBoundsTop()&&this.shape(this._x,this._y+this.getCanvasHeight()),this.touchesBoundsBottom()&&this.shape(this._x,this._y-this.getCanvasHeight()),this.touchesBoundsRight()&&this.shape(this._x-this.getCanvasWidth(),this._y),this.touchesBoundsLeft()&&this.shape(this._x+this.getCanvasWidth(),this._y),this.touchesBoundsTop()&&this.touchesBoundsLeft()&&this.shape(this._x+this.getCanvasWidth(),this._y+this.getCanvasHeight()),this.touchesBoundsTop()&&this.touchesBoundsRight()&&this.shape(this._x-this.getCanvasWidth(),this._y+this.getCanvasHeight()),this.touchesBoundsBottom()&&this.touchesBoundsLeft()&&this.shape(this._x+this.getCanvasWidth(),this._y-this.getCanvasHeight()),this.touchesBoundsBottom()&&this.touchesBoundsRight()&&this.shape(this._x-this.getCanvasWidth(),this._y-this.getCanvasHeight())}},{key:"getWidth",value:function(){return 2*this._radius}},{key:"getHeight",value:function(){return 2*this._radius}},{key:"getCanvasWidth",value:function(){return this._context.canvas.width}},{key:"getCanvasHeight",value:function(){return this._context.canvas.height}},{key:"getOuterLeft",value:function(){return this._x-this._radius}},{key:"getOuterRight",value:function(){return this._x+this._radius}},{key:"getOuterTop",value:function(){return this._y-this._radius}},{key:"getOuterBottom",value:function(){return this._y+this._radius}},{key:"moveUp",value:function(t){this._y-=this._speed*t}},{key:"moveDown",value:function(t){this._y+=this._speed*t}},{key:"moveRight",value:function(t){this._x+=this._speed*t}},{key:"moveLeft",value:function(t){this._x-=this._speed*t}},{key:"touchesBoundsTop",value:function(){return this._y<this._radius}},{key:"touchesBoundsBottom",value:function(){return this._y>this.getCanvasHeight()-this._radius}},{key:"touchesBoundsLeft",value:function(){return this._x<this._radius}},{key:"touchesBoundsRight",value:function(){return this._x>this.getCanvasWidth()-this._radius}},{key:"centerOnBoundsTop",value:function(){return this._y<0}},{key:"centerOnBoundsBottom",value:function(){return this._y>this.getCanvasHeight()}},{key:"centerOnBoundsLeft",value:function(){return this._x<0}},{key:"centerOnBoundsRight",value:function(){return this._x>this.getCanvasWidth()}},{key:"outOfBoundsTop",value:function(){return this._y<-this._radius}},{key:"outOfBoundsBottom",value:function(){return this._y>this.getCanvasHeight()+this._radius}},{key:"outOfBoundsLeft",value:function(){return this._x<-this._radius}},{key:"outOfBoundsRight",value:function(){return this._x>this.getCanvasWidth()+this._radius}}]),t}(),n=function(t){function e(t,i,s,n){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s,n));return o._x=o.getCanvasWidth()/2,o._y=o.getCanvasHeight()/2,o}return _inherits(e,t),e}(s),o=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,0,0,""));return i._direction=0,i._colors=["#F8FFE5","#06D6A0","#1B9AAA","#FFC43D"],i.randomizeProperties(),i}return _inherits(e,t),_createClass(e,[{key:"draw",value:function(){this.shape(this._x,this._y),(this.outOfBoundsBottom()||this.outOfBoundsTop()||this.outOfBoundsLeft()||this.outOfBoundsRight())&&this.randomizeProperties()}},{key:"randomizeProperties",value:function(){var t=this;switch(this._direction=this.getRandomInt(0,3),this._radius=this.getRandomInt(25,75),this._speed=this.getRandomFloat(.3,.5),this._color=this._colors[this.getRandomInt(0,this._colors.length-1)],this._direction){case 0:this._x=this.getRandomInt(0,this.getCanvasWidth()),this._y=this.getCanvasHeight()+this._radius,this.move=function(e){t._y-=t._speed*e};break;case 1:this._x=this.getRandomInt(0,this.getCanvasWidth()),this._y=0-this._radius,this.move=function(e){t._y+=t._speed*e};break;case 2:this._x=0-this._radius,this._y=this.getRandomInt(0,this.getCanvasHeight()),this.move=function(e){t._x+=t._speed*e};break;case 3:this._x=this.getCanvasWidth()+this._radius,this._y=this.getRandomInt(0,this.getCanvasHeight()),this.move=function(e){t._x-=t._speed*e}}}},{key:"getRandomFloat",value:function(t,e){return Math.random()*(e-t)+t}},{key:"getRandomInt",value:function(t,e){return Math.round(Math.random()*(e-t)+t)}}]),e}(s),a=function(){function t(e){_classCallCheck(this,t),this._game=e}return _createClass(t,[{key:"update",value:function(t){var e=this;r&&this._game._player.moveUp(t),u&&this._game._player.moveDown(t),_&&this._game._player.moveRight(t),c&&this._game._player.moveLeft(t),this._game._enemies.forEach(function(i){i.move(t),0!==e._game._tries&&(e._game.onCollision(i),e._game.updateScore())}),0===v._tries||v._playing||v._gameLoop.stop()}},{key:"draw",value:function(t){d.clearRect(0,0,l.width,l.height),0!==this._game._tries&&this._game._player.draw(),this._game._enemies.forEach(function(t){t.draw()})}},{key:"end",value:function(t,e){if(e){var i=Math.round(MainLoop.resetFrameDelta());console.warn("Main loop panicked, probably because the browser tab was put in the background. Discarding "+i+"ms")}}},{key:"start",value:function(){MainLoop.setUpdate(this.update.bind(this)).setDraw(this.draw.bind(this)).setEnd(this.end.bind(this)).start()}},{key:"stop",value:function(){MainLoop.stop()}}]),t}(),h=function(){function t(){var e=this;_classCallCheck(this,t),this._playing=!1,this._difficulty=3,this._tries=0,this._best=0,this._player=new n(d,.75,50,"#F45B69"),this._enemies=[],this.createEnemies(),this._gameLoop=new a(this),this._gameLoop.start(),this._scoreElement=document.getElementById("scoreboard"),this._overlay=document.getElementById("overlay"),this._overlay.innerHTML='<div class="content-center"><p>Use arrow keys to move the player</p><button id="start">Start Game</button></div>',this._startButton=document.getElementById("start"),this._startButton.addEventListener("click",function(t){t.preventDefault(),e.newGame()})}return _createClass(t,[{key:"gameOver",value:function(){var t=this;this._playing=!1,this._overlay.style.visibility="visible",this._scoreElement.textContent=" ",this._overlay.innerHTML='<div class="content-center"><h1>Game Over!</h1><p>Your score is:</p><h2 id="end-score">'+this._score+'</h2><button id="start">Restart Game</button></div>',this._startButton=document.getElementById("start"),this._startButton.addEventListener("click",function(e){e.preventDefault(),t.newGame()})}},{key:"newGame",value:function(){this._playing=!0,this._overlay.style.visibility="hidden",this._tries++,this._difficulty=3,this._time=(new Date).getTime(),this._score=1,this._player._x=this._player.getCanvasWidth()/2,this._player._y=this._player.getCanvasHeight()/2,this._enemies=[],this.createEnemies(),this._gameLoop.start()}},{key:"onCollision",value:function(t){var e=this._player._x-t._x,i=this._player._y-t._y,s=Math.sqrt(e*e+i*i);s<this._player._radius+t._radius&&this.gameOver()}},{key:"createEnemies",value:function(){for(var t=0;t<this._difficulty;t++)this._enemies[t]=new o(d)}},{key:"upDifficulty",value:function(){this._score%100==0&&(this._enemies[this._difficulty++]=new o(d))}},{key:"setBestScore",value:function(){this._score>this._best&&(this._best=this._score)}},{key:"updateScore",value:function(){(new Date).getTime()-this._time>100&&(this._scoreElement.innerHTML='<span class="score">score: '+this._score+'</span><span class="best">best: '+this._best+"</span>",this._score++,this.upDifficulty(),this._score>this._best&&(this._best=this._score),this._time=(new Date).getTime())}}]),t}();document.onkeydown=t,document.onkeyup=e;var r=!1,u=!1,c=!1,_=!1,l=document.getElementById("canvas"),d=l.getContext("2d");l.width=window.innerWidth,l.height=window.innerHeight;var v=new h}();
//# sourceMappingURL=main.min.js.map
